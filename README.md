## Farm Mini App – ферма для Telegram (прототип)

Это прототип мини‑игры‑фермы для Telegram: помидоры, огурцы, коровы и куры с таймерами, базовой экономикой и заделом под реферальную программу и донат.

Сейчас реализовано:

- **Грядки**: слоты с помидорами и огурцами. Тратишь монеты — запускаешь рост по таймеру, потом собираешь урожай.
- **Животные**: коровы и куры. Тратишь корм — получаешь молоко и яйца по таймеру.
- **Экономика**: продажа продукции за монеты, покупка корма. Сохранение в `localStorage` и на backend (если задан `VITE_API_URL`).
- **Backend**: при наличии `VITE_API_URL` мини‑апп загружает/сохраняет ферму через API и привязывает реферера при открытии по ссылке `ref_xxx`.
- **UI под мини‑апп**: компактная карточка, адаптив под мобильные и ПК.

### Как запустить локально

1. Установи зависимости:

```bash
cd farm-miniapp
npm install
```

2. Запусти дев‑сервер:

```bash
npm run dev
```

3. Открой в браузере адрес, который покажет Vite (обычно `http://localhost:5173`).

### Как подвязать к Telegram WebApp

Этот репозиторий сейчас даёт **фронтенд‑часть**. Дальше:

- создаёшь Telegram‑бота через `@BotFather`,
- в боте добавляешь кнопку, которая открывает WebApp по URL этого фронтенда,
- в `main.tsx` / `App.tsx` подключаешь Telegram WebApp SDK (через `window.Telegram.WebApp`), считываешь `user.id` и используешь его как ключ игрока,
- В `.env` задай `VITE_API_URL=http://localhost:4000` (или URL прод‑backend). Тогда состояние фермы и реферальный bind идут через API.

### Следующие шаги

- **Реферальная программа**: добавить экран с реферальной ссылкой, логикой `referrer_id` и наградами по этапам.
- **Платежи**: интегрировать Telegram Stars или CryptoPay:
  - сделать экран магазина,
  - настроить обработку платежей на backend,
  - начислять премиум‑валюту (`gems`) игроку.
- **Экономика**: вынести рейты и балансы в отдельный модуль, добавить уровни фермы, апгрейды зданий и животных.

